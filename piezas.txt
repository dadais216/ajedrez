def mover vacio mov color 20 200 115 pausa
def moverng vacio mov << color 20 200 115 >> pausa
def moverc vacio mov color 200 0 0 pausa
def movera vacio mov color 0 0 200 pausa
def moverb vacio mov color 200 120 0 pausa
def movernc vacio mov pausa
def clickc click color 20 200 115
def captura  enemigo capt color 255 0 0 mov pausa
def estandar  opt exc mover or captura end
def then lim
def end lim
def control color 200 0 0 pieza contr
def controlu color 200 0 0 contr
def moveru mov color 20 200 115 pausa
def spawn color 255 170 100 vacio spwn
def spawnnc vacio spwn
def spawnu color 255 170 100 spwn
def castillo prob color 0 0 0



:1 1 #torre
#{w,a,s,d} mover
desliz {w,a,s,d} mover end

:2 2 #caballo
numSet 0 0 desliz opt wwa or aaw or aas or ssa or ssd or dds or ddw or wwd end moverng prob numAdd 0 1 numShow 0 end


:3 3 #alfil
#desliz w mover posRemember desliz {wa,wd} mover end posRestore end #pone mal los clickers, ni idea
#desliz w mover << desliz {as,sd} mover end >> end
#desliz opt w or a or s or d end moverng prob end
#desliz opt exc desliz wa mover prob end outbounds or desliz wd mover prob end outbounds or desliz as mover prob end outbounds or desliz sd mover prob end outbounds end end 
#inicial ww mover 
#a vacio spwn 1 dd mover
wa mover sd spawnu 1 desliz wa mover end
wd mover as spawnu 1 desliz wd mover end
sa mover dw spawnu 1 desliz sa mover end
sd mover wa spawnu 1 desliz sd mover end


:4 4 #reina
#desliz w mover << desliz a mover end >> end
#desliz a mover << desliz s mover end >> end
#desliz s mover << desliz d mover end >> end
#desliz d mover << desliz w mover end >> end
desliz w movernc opt a mover or d movera end prob end
desliz s movernc opt a mover or d movera end prob end
desliz a movernc opt w moverb or s moverc end prob end
desliz d movernc opt w moverb or s moverc end prob end

:5 5 #rey
{w,wa,a,as,s,sd,d,dw} mover
wa spawnnc 1 ss spawnnc 1 dd spawnnc 1 ww spawnnc 1 as color 0 0 0 
#desliz nc a end desliz nc s end d desliz nc esp castillo wn end sa desliz nc esp castillo dn end wa desliz nc esp castillo sn end wa desliz nc esp castillo an end ori desliz {w,wa,a,as,s,sd,d,dw} mover end 

#desliz t nc a end desliz t nc s end dw desliz nc castillo w end sn desliz nc castillo d end an desliz nc castillo s end wn desliz nc castillo a end castillo ori opt \
#desliz {w,wa,a,as,s,sd,d,dw} mover end or \
#end

#numSet 0 0 \
#desliz wa mover prob end outbounds \
#desliz \
#opt \
#numCmp 0 0 desliz {wa,wd,sa,sd} mover prob end or \
#end opt exc outbounds or numSet 0 1 end end

#numSet 0 0 \
#desliz wd mover prob end outbounds \
#desliz \
#opt \
#numCmp 0 0 desliz {wa,wd,sa,sd} mover prob end or \
#end opt exc outbounds or numSet 0 1 end end

#numSet 0 0 \
#desliz as mover prob end outbounds \
#desliz \
#opt \
#numCmp 0 0 desliz {wa,wd,sa,sd} mover prob end or \
#end opt exc outbounds or numSet 0 1 end end

#numSet 0 0 \
#desliz sd mover prob end outbounds \
#desliz \
#opt \
#numCmp 0 0 desliz {wa,wd,sa,sd} mover prob end or \
#end opt exc outbounds or numSet 0 1 end end

#opt \
#numSet 0 0 desliz {wa,wd,as,sd} mover end outbounds or \
#end prob \
#<< \
#desliz \
#opt \
#numCmp 0 0 desliz {wa,wd,sa,sd} mover prob end or \
#end opt exc outbounds or numSet 0 1 end end \
#>>
#la construccion se kakeo con el bloque, nomas lo mete bien en una rama

#numSet 0 0 \
#desliz wa mover prob end outbounds \
#desliz \
#opt \
#numCmp 0 0 desliz {wa,wd,sa,sd} mover prob end or \
#end opt exc outbounds or numSet 0 1 end end

:6 0 #peon
#opt \
#desliz {w,a,s,d} spawn 6 end or \
#end
desliz {w,a,s,d} spawn 6 end


#if
#numSet 0 0 aa color 50 50 50 opt exc vacio or numSet 0 1 end ori opt exc numCmp 0 0 \
#desliz w mover end or desliz s mover end end


#desliz {{ww,ss}{a,d},{aa,dd}{w,s}}{w,wa,a,as,s,sd,d,dw} mover then pass

#def circ[ numSet 1 0 desliz numDsti 1 0
#def ]circ << esp mover numShow 0 >> numAdd 1 1 end
#numSet 0 2 sdn desliz nc numLess 0 20 circ[ wn ]circ circ[ an ]circ circ[ sn ]circ circ[ dn ]circ sdsdn numAdd 0 4 end

